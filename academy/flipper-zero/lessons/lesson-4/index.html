<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 4: Infrared Control Systems | Flipper Zero Course</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0a0a0a;
            --bg-medium: #1a1a1a;
            --bg-light: #2a2a2a;
            --text-primary: #ffffff;
            --text-secondary: #b0b0b0;
            --accent: #00ff88;
            --accent-dim: #00cc6a;
            --border: #333333;
            --warning: #ff6b6b;
            --info: #4dabf7;
            --success: #51cf66;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Atkinson Hyperlegible', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
            padding-top: 120px;
        }

        .accessibility-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--bg-medium);
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid var(--border);
            z-index: 1000;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .accessibility-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .control-group label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .btn-control {
            background: var(--bg-light);
            border: 1px solid var(--border);
            color: var(--text-primary);
            padding: 0.4rem 0.8rem;
            border-radius: 4px;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .btn-control:hover {
            background: var(--bg-dark);
            border-color: var(--accent);
        }

        .progress-bar {
            position: fixed;
            top: 52px;
            left: 0;
            right: 0;
            height: 60px;
            background: var(--bg-medium);
            border-bottom: 2px solid var(--border);
            z-index: 999;
            padding: 0.75rem 1rem;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .progress-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .xp-badge {
            background: var(--accent);
            color: var(--bg-dark);
            padding: 0.3rem 0.8rem;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .progress-track {
            width: 100%;
            height: 8px;
            background: var(--bg-light);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--accent-dim));
            width: 0%;
            transition: width 0.3s ease;
        }

        .nav-breadcrumb {
            background: var(--bg-medium);
            padding: 1rem;
            border-bottom: 2px solid var(--border);
            margin-bottom: 2rem;
        }

        .breadcrumb {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            gap: 0.5rem;
            align-items: center;
            font-size: 0.9rem;
            flex-wrap: wrap;
        }

        .breadcrumb a {
            color: var(--accent);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .breadcrumb span {
            color: var(--text-secondary);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 2rem 3rem;
        }

        .lesson-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .lesson-number {
            color: var(--accent);
            font-size: 1rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .lesson-header h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .lesson-meta {
            display: flex;
            justify-content: center;
            gap: 2rem;
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .objectives-box {
            background: var(--bg-medium);
            border: 2px solid var(--accent);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .objectives-box h2 {
            color: var(--accent);
            font-size: 1.3rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .objectives-list {
            list-style: none;
            display: grid;
            gap: 0.75rem;
        }

        .objectives-list li {
            display: flex;
            align-items: start;
            gap: 0.75rem;
            padding: 0.5rem;
            background: var(--bg-light);
            border-radius: 4px;
        }

        .objectives-list li::before {
            content: "✓";
            color: var(--accent);
            font-weight: bold;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .content-section {
            margin: 2rem 0;
        }

        .content-section h2 {
            color: var(--accent);
            font-size: 1.8rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border);
        }

        .content-section h3 {
            color: var(--text-primary);
            font-size: 1.4rem;
            margin: 1.5rem 0 0.75rem;
        }

        .content-section p {
            margin-bottom: 1rem;
            color: var(--text-secondary);
            line-height: 1.7;
        }

        .content-section ul,
        .content-section ol {
            margin: 1rem 0 1rem 2rem;
            color: var(--text-secondary);
        }

        .content-section li {
            margin: 0.5rem 0;
        }

        .info-box {
            background: var(--bg-medium);
            border-left: 4px solid var(--info);
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 4px;
        }

        .info-box.warning {
            border-left-color: var(--warning);
        }

        .info-box.success {
            border-left-color: var(--success);
        }

        .info-box h3 {
            color: var(--info);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .info-box.warning h3 {
            color: var(--warning);
        }

        .info-box.success h3 {
            color: var(--success);
        }

        .info-box ul {
            margin-left: 1.5rem;
        }

        .protocol-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .protocol-card {
            background: var(--bg-medium);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 1.5rem;
        }

        .protocol-card h4 {
            color: var(--accent);
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
        }

        .protocol-card p {
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin: 0.5rem 0;
        }

        .protocol-card ul {
            margin: 0.5rem 0 0 1.5rem;
            font-size: 0.9rem;
        }

        .exercise-box {
            background: var(--bg-medium);
            border: 2px solid var(--accent);
            border-radius: 8px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .exercise-box h3 {
            color: var(--accent);
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .exercise-steps {
            counter-reset: step-counter;
            list-style: none;
        }

        .exercise-steps li {
            counter-increment: step-counter;
            margin: 1rem 0;
            padding-left: 3rem;
            position: relative;
        }

        .exercise-steps li::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 0;
            background: var(--accent);
            color: var(--bg-dark);
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .btn-complete {
            background: var(--accent);
            color: var(--bg-dark);
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
        }

        .btn-complete:hover {
            background: var(--accent-dim);
            transform: scale(1.02);
        }

        .btn-complete.completed {
            background: var(--success);
        }

        .break-reminder {
            background: linear-gradient(135deg, var(--bg-medium), var(--bg-light));
            border: 2px solid var(--warning);
            border-radius: 8px;
            padding: 2rem;
            margin: 3rem 0;
            text-align: center;
        }

        .break-reminder h3 {
            color: var(--warning);
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .break-reminder p {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
        }

        .break-timer {
            font-size: 3rem;
            color: var(--accent);
            font-weight: bold;
            margin: 1rem 0;
            font-variant-numeric: tabular-nums;
        }

        .break-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn-break {
            background: var(--warning);
            color: var(--bg-dark);
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
        }

        .btn-break:hover {
            opacity: 0.9;
            transform: scale(1.02);
        }

        .btn-break.secondary {
            background: var(--bg-light);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .lesson-navigation {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 2px solid var(--border);
        }

        .nav-btn {
            flex: 1;
            padding: 1rem 1.5rem;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
            text-decoration: none;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .nav-btn.primary {
            background: var(--accent);
            color: var(--bg-dark);
            border: none;
        }

        .nav-btn.secondary {
            background: var(--bg-medium);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            opacity: 0.9;
        }

        @media (max-width: 768px) {
            body {
                padding-top: 140px;
            }

            .lesson-header h1 {
                font-size: 1.8rem;
            }

            .lesson-meta {
                flex-direction: column;
                gap: 0.5rem;
            }

            .protocol-grid {
                grid-template-columns: 1fr;
            }

            .lesson-navigation {
                flex-direction: column;
            }
        }

        body.dyslexia-friendly {
            letter-spacing: 0.05em;
            word-spacing: 0.1em;
        }

        body.high-contrast {
            --bg-dark: #000000;
            --bg-medium: #1a1a1a;
            --border: #ffffff;
        }

        .reduce-motion * {
            animation: none !important;
            transition: none !important;
        }
    </style>
</head>
<body>
    <!-- Accessibility Bar -->
    <div class="accessibility-bar">
        <div class="accessibility-controls">
            <div class="control-group">
                <label for="font-size">Text Size:</label>
                <button class="btn-control" onclick="adjustFontSize(-1)">A-</button>
                <button class="btn-control" onclick="adjustFontSize(1)">A+</button>
            </div>
            <button class="btn-control" onclick="toggleDyslexiaMode()">Dyslexia Mode</button>
            <button class="btn-control" onclick="toggleHighContrast()">High Contrast</button>
            <button class="btn-control" onclick="toggleReducedMotion()">Reduce Motion</button>
        </div>
    </div>

    <!-- Progress Bar -->
    <div class="progress-bar">
        <div class="progress-info">
            <span class="progress-text">Lesson Progress: <span id="progress-percent">0</span>%</span>
            <span class="xp-badge">+50 XP</span>
        </div>
        <div class="progress-track">
            <div class="progress-fill" id="progress-fill"></div>
        </div>
    </div>

    <!-- Breadcrumb Navigation -->
    <nav class="nav-breadcrumb">
        <div class="breadcrumb">
            <a href="../../index.html">Academy</a>
            <span>→</span>
            <a href="../index.html">Flipper Zero</a>
            <span>→</span>
            <span>Lesson 4</span>
        </div>
    </nav>

    <div class="container">
        <!-- Lesson Header -->
        <header class="lesson-header">
            <div class="lesson-number">LESSON 4 OF 6</div>
            <h1>Infrared Control Systems</h1>
            <div class="lesson-meta">
                <div class="meta-item">
                    <span>⏱️</span>
                    <span>~45 minutes</span>
                </div>
                <div class="meta-item">
                    <span>📊</span>
                    <span>Beginner</span>
                </div>
                <div class="meta-item">
                    <span>🎯</span>
                    <span>Hands-on: 3 exercises</span>
                </div>
            </div>
        </header>

        <!-- Learning Objectives -->
        <section class="objectives-box">
            <h2>🎯 What You'll Learn</h2>
            <ul class="objectives-list">
                <li>Understand how infrared communication works and its applications</li>
                <li>Learn and replay IR signals from TVs, ACs, and appliances</li>
                <li>Identify different IR protocols and their characteristics</li>
                <li>Build a universal remote library on your Flipper</li>
                <li>Test smart home device security through IR channels</li>
                <li>Create custom IR commands for automation projects</li>
            </ul>
        </section>

        <!-- Main Content -->
        <article>
            <!-- Introduction -->
            <section class="content-section">
                <h2>Understanding Infrared Technology</h2>
                <p>
                    Infrared (IR) is a wireless communication technology that uses light waves just below the visible spectrum. It's been the standard for remote controls since the 1980s and remains ubiquitous in consumer electronics.
                </p>
                <p>
                    The Flipper Zero's IR transceiver can both send and receive infrared signals, making it a powerful tool for learning about IR protocols, building universal remotes, and testing smart home security.
                </p>

                <div class="info-box">
                    <h3>💡 Why IR is Still Relevant</h3>
                    <p>Despite being "old technology," infrared is still everywhere:</p>
                    <ul>
                        <li>Nearly every TV, AC unit, and home theater system uses IR</li>
                        <li>Simple, cheap, and reliable</li>
                        <li>No pairing or setup required</li>
                        <li>No interference with WiFi or Bluetooth</li>
                        <li>Works without network connectivity</li>
                    </ul>
                </div>

                <h3>How IR Communication Works</h3>
                <p>
                    Infrared remotes work by flashing an IR LED in a specific pattern:
                </p>
                <ol>
                    <li><strong>Carrier Frequency:</strong> IR LED pulses at 38 kHz (most common)</li>
                    <li><strong>Modulation:</strong> Commands are encoded by timing the on/off pulses</li>
                    <li><strong>Transmission:</strong> IR LED emits the encoded pattern</li>
                    <li><strong>Reception:</strong> Device receives and decodes the pattern</li>
                    <li><strong>Action:</strong> Device performs the commanded function</li>
                </ol>

                <div class="info-box warning">
                    <h3>⚠️ IR Limitations</h3>
                    <ul>
                        <li><strong>Line of Sight:</strong> Requires direct path or reflection</li>
                        <li><strong>Short Range:</strong> Typically 5-10 meters maximum</li>
                        <li><strong>Interference:</strong> Bright sunlight can cause issues</li>
                        <li><strong>One-Way:</strong> No feedback from device to remote</li>
                    </ul>
                </div>
            </section>

            <!-- IR Protocols -->
            <section class="content-section">
                <h2>Common IR Protocols</h2>
                <p>
                    Different manufacturers use different encoding schemes for their IR signals. Understanding these protocols helps you work with various devices.
                </p>

                <div class="protocol-grid">
                    <div class="protocol-card">
                        <h4>NEC Protocol</h4>
                        <p><strong>Used by:</strong> Many Asian manufacturers</p>
                        <ul>
                            <li>38 kHz carrier frequency</li>
                            <li>Simple, widely supported</li>
                            <li>Common in TVs and generic remotes</li>
                            <li>Easy to decode and replay</li>
                        </ul>
                    </div>

                    <div class="protocol-card">
                        <h4>RC5/RC6</h4>
                        <p><strong>Used by:</strong> Philips and many European brands</p>
                        <ul>
                            <li>36 kHz carrier (RC5) or 36/38 kHz (RC6)</li>
                            <li>Bi-phase encoding</li>
                            <li>Toggle bit to detect repeat presses</li>
                            <li>Efficient and reliable</li>
                        </ul>
                    </div>

                    <div class="protocol-card">
                        <h4>Samsung</h4>
                        <p><strong>Used by:</strong> Samsung TVs and appliances</p>
                        <ul>
                            <li>38 kHz carrier</li>
                            <li>32-bit command structure</li>
                            <li>Widely documented</li>
                            <li>Similar to NEC but distinct</li>
                        </ul>
                    </div>

                    <div class="protocol-card">
                        <h4>Sony SIRC</h4>
                        <p><strong>Used by:</strong> Sony devices</p>
                        <ul>
                            <li>40 kHz carrier (unusual)</li>
                            <li>12, 15, or 20-bit variants</li>
                            <li>Commands repeated 3 times</li>
                            <li>Robust against interference</li>
                        </ul>
                    </div>

                    <div class="protocol-card">
                        <h4>RAW</h4>
                        <p><strong>Universal fallback</strong></p>
                        <ul>
                            <li>Records exact timing of pulses</li>
                            <li>Works with any protocol</li>
                            <li>Larger file sizes</li>
                            <li>Use when protocol unknown</li>
                        </ul>
                    </div>
                </div>

                <div class="info-box">
                    <h3>💡 Protocol Auto-Detection</h3>
                    <p>
                        The Flipper Zero automatically detects common protocols when learning signals. If it recognizes the protocol, it stores the signal efficiently. If not, it falls back to RAW mode.
                    </p>
                </div>
            </section>

            <!-- Learning IR Signals -->
            <section class="content-section">
                <h2>Learning IR Signals</h2>
                <p>
                    Capturing IR signals from existing remotes is straightforward with the Flipper. This is your first step to building a universal remote library.
                </p>

                <h3>Basic Learning Process</h3>
                <ol>
                    <li>Navigate to <strong>Infrared</strong> from the main menu</li>
                    <li>Select <strong>Learn New Remote</strong></li>
                    <li>Point your remote at the Flipper's IR receiver (top of device)</li>
                    <li>Press a button on your remote</li>
                    <li>Flipper will capture and display the signal</li>
                    <li>Give the button a descriptive name (e.g., "Power", "Vol+", "Ch+")</li>
                    <li>Repeat for all buttons you want to capture</li>
                    <li>Save the complete remote with a device name</li>
                </ol>

                <div class="info-box">
                    <h3>💡 Learning Tips</h3>
                    <ul>
                        <li><strong>Get close:</strong> Hold remote 5-10cm from Flipper's top</li>
                        <li><strong>Point directly:</strong> Aim the remote's IR LED at the Flipper</li>
                        <li><strong>One press only:</strong> Quick button press, don't hold</li>
                        <li><strong>Avoid sunlight:</strong> Bright light can interfere</li>
                        <li><strong>Name consistently:</strong> Use standard names for common buttons</li>
                        <li><strong>Test immediately:</strong> Verify each learned signal works</li>
                    </ul>
                </div>

                <h3>Learning from Universal Remotes</h3>
                <p>
                    If you don't have the original remote, universal remotes can be a source:
                </p>
                <ul>
                    <li>Program universal remote for your device brand</li>
                    <li>Learn signals from the universal remote to Flipper</li>
                    <li>Test to verify compatibility with actual device</li>
                    <li>Some commands may not be available on universal remotes</li>
                </ul>

                <h3>Pre-loaded Universal Remotes</h3>
                <p>
                    The Flipper comes with pre-loaded IR databases for common devices:
                </p>
                <ul>
                    <li><strong>TVs:</strong> Power, volume, channel controls for major brands</li>
                    <li><strong>Air Conditioners:</strong> Temperature and mode controls</li>
                    <li><strong>Audio Systems:</strong> Playback and volume controls</li>
                    <li><strong>Projectors:</strong> Power and input switching</li>
                </ul>
                <p>
                    Navigate to <strong>Infrared → Universal Remotes</strong> to access these.
                </p>
            </section>

            <!-- Exercise 1 -->
            <div class="exercise-box">
                <h3>🔧 Hands-On Exercise 1: Build Your First Universal Remote</h3>
                <p><strong>Time:</strong> 15 minutes | <strong>Difficulty:</strong> Beginner</p>
                <p>
                    <strong>Requirements:</strong> An IR remote control for any device (TV, AC, stereo, etc.)
                </p>
                <ol class="exercise-steps">
                    <li>Navigate to Infrared → Learn New Remote on your Flipper</li>
                    <li>Name your remote (e.g., "Living_Room_TV")</li>
                    <li>Learn the Power button first</li>
                    <li>Learn Volume Up and Volume Down</li>
                    <li>Learn Channel Up and Channel Down (if applicable)</li>
                    <li>Learn at least 5 additional buttons you use regularly</li>
                    <li>Save the remote</li>
                    <li>Test each learned button to verify it works</li>
                    <li>Document any buttons that didn't capture correctly</li>
                </ol>
                <div style="margin-top: 1.5rem;">
                    <button class="btn-complete" onclick="completeExercise(1)">Mark Exercise Complete</button>
                </div>
            </div>

            <!-- Break Reminder 1 -->
            <div class="break-reminder">
                <h3>⏸️ Break Point #1</h3>
                <p>You've learned the basics of IR technology and captured your first remote. Time for a break!</p>
                <p style="font-size: 0.95rem; margin-top: 1rem;">Take 5 minutes to:</p>
                <ul style="list-style: none; padding: 0; margin: 1rem 0;">
                    <li>💧 Hydrate</li>
                    <li>🚶 Stretch and move</li>
                    <li>👀 Rest your eyes from screens</li>
                </ul>
                <div class="break-timer" id="break-timer">5:00</div>
                <div class="break-controls">
                    <button class="btn-break" onclick="startBreakTimer()">Start 5-Min Break</button>
                    <button class="btn-break secondary" onclick="skipBreak()">Skip Break</button>
                </div>
            </div>

            <!-- Sending IR Signals -->
            <section class="content-section">
                <h2>Sending IR Signals</h2>
                <p>
                    Once you've learned signals, using them is straightforward. The Flipper can send individual commands or act as a complete remote replacement.
                </p>

                <h3>Using Saved Remotes</h3>
                <ol>
                    <li>Navigate to <strong>Infrared → Saved Remotes</strong></li>
                    <li>Select your saved remote</li>
                    <li>Choose the button you want to send</li>
                    <li>Point Flipper's top at your device</li>
                    <li>Press OK to transmit</li>
                </ol>

                <h3>Using Universal Remotes</h3>
                <ol>
                    <li>Navigate to <strong>Infrared → Universal Remotes</strong></li>
                    <li>Select device type (TV, AC, etc.)</li>
                    <li>Choose manufacturer</li>
                    <li>Use the on-screen controls</li>
                    <li>Flipper sends standardized commands</li>
                </ol>

                <div class="info-box">
                    <h3>💡 Transmission Range Tips</h3>
                    <ul>
                        <li>Flipper's IR LED is reasonably powerful (up to ~5 meters)</li>
                        <li>Point directly at device's IR receiver for best results</li>
                        <li>Can use reflections (walls, ceiling) for indirect control</li>
                        <li>Multiple devices may respond if they use same protocol</li>
                        <li>Bright sunlight can reduce effective range</li>
                    </ul>
                </div>

                <h3>Practical Use Cases</h3>
                <ul>
                    <li><strong>Hotel rooms:</strong> Control TV without finding the remote</li>
                    <li><strong>Home automation:</strong> Integrate IR devices into smart systems</li>
                    <li><strong>Pranks (responsible):</strong> Change channels in public spaces (don't be obnoxious)</li>
                    <li><strong>Accessibility:</strong> Consolidate multiple remotes into one device</li>
                    <li><strong>Backup remote:</strong> Never worry about lost remotes again</li>
                </ul>
            </section>

            <!-- Exercise 2 -->
            <div class="exercise-box">
                <h3>🔧 Hands-On Exercise 2: Test Transmission Range</h3>
                <p><strong>Time:</strong> 10 minutes | <strong>Difficulty:</strong> Beginner</p>
                <p>
                    Understand the Flipper's IR transmission capabilities and optimal usage.
                </p>
                <ol class="exercise-steps">
                    <li>Position yourself 1 meter from your device</li>
                    <li>Send a test command (like Power) pointing directly at device</li>
                    <li>Gradually increase distance until commands stop working</li>
                    <li>Document maximum effective range</li>
                    <li>Try indirect transmission (bounce off wall or ceiling)</li>
                    <li>Test at an angle rather than straight on</li>
                    <li>Try with and without bright ambient light</li>
                    <li>Note your findings about optimal conditions</li>
                </ol>
                <div style="margin-top: 1.5rem;">
                    <button class="btn-complete" onclick="completeExercise(2)">Mark Exercise Complete</button>
                </div>
            </div>

            <!-- Smart Home Security -->
            <section class="content-section">
                <h2>IR Security Testing</h2>
                <p>
                    While IR is generally low-risk, it can be a security concern in certain scenarios. Understanding these risks helps you assess smart home security.
                </p>

                <h3>IR Security Vulnerabilities</h3>
                <ul>
                    <li>
                        <strong>No Authentication:</strong> IR has no security—anyone can send any command
                        <ul style="margin-top: 0.5rem;">
                            <li>No pairing or authorization required</li>
                            <li>Commands can be replayed indefinitely</li>
                            <li>Devices can't distinguish legitimate from malicious signals</li>
                        </ul>
                    </li>
                    <li style="margin-top: 1rem;">
                        <strong>Eavesdropping:</strong> IR signals can be captured from a distance
                        <ul style="margin-top: 0.5rem;">
                            <li>Telescopic lenses can capture signals through windows</li>
                            <li>Useful in social engineering or surveillance scenarios</li>
                            <li>No indication that capture occurred</li>
                        </ul>
                    </li>
                    <li style="margin-top: 1rem;">
                        <strong>No Feedback Loop:</strong> Devices don't confirm command execution
                        <ul style="margin-top: 0.5rem;">
                            <li>Can't tell if command was received</li>
                            <li>May send multiple commands unknowingly</li>
                            <li>State can get out of sync</li>
                        </ul>
                    </li>
                </ul>

                <h3>Real-World Attack Scenarios</h3>
                <div class="info-box warning">
                    <h3>⚠️ Theoretical Attack Examples</h3>
                    <p><strong>These are for awareness only—do not perform without authorization!</strong></p>
                    <ul>
                        <li><strong>Display Manipulation:</strong> Changing displays in stores or airports (disruption)</li>
                        <li><strong>HVAC Tampering:</strong> Adjusting building climate controls (discomfort/energy waste)</li>
                        <li><strong>Presentation Hijacking:</strong> Controlling projectors during meetings (disruption)</li>
                        <li><strong>Smart Home Pranks:</strong> Unauthorized device control (invasion of privacy)</li>
                    </ul>
                </div>

                <h3>IR Security Best Practices</h3>
                <p>
                    When assessing or improving IR security:
                </p>
                <ul>
                    <li><strong>Physical Security:</strong> Place devices out of public line-of-sight</li>
                    <li><strong>Disable IR When Not Needed:</strong> Many devices support disabling IR input</li>
                    <li><strong>Use Alternative Controls:</strong> Prefer WiFi, Bluetooth, or wired control when security matters</li>
                    <li><strong>Monitor for Anomalies:</strong> Log unexpected device state changes</li>
                    <li><strong>User Awareness:</strong> Educate users about IR limitations</li>
                </ul>

                <div class="info-box">
                    <h3>💡 IR in Critical Systems</h3>
                    <p>
                        <strong>IR should never be the sole control method for:</strong>
                    </p>
                    <ul>
                        <li>Security systems or door locks</li>
                        <li>Critical infrastructure controls</li>
                        <li>Medical equipment</li>
                        <li>Industrial machinery</li>
                    </ul>
                    <p style="margin-top: 0.75rem;">
                        Always use authenticated, encrypted protocols for security-critical applications.
                    </p>
                </div>
            </section>

            <!-- Break Reminder 2 -->
            <div class="break-reminder">
                <h3>⏸️ Break Point #2</h3>
                <p>Excellent progress! You understand IR transmission and security implications. Take a break!</p>
                <p style="font-size: 0.95rem; margin-top: 1rem;">Take 5-10 minutes to:</p>
                <ul style="list-style: none; padding: 0; margin: 1rem 0;">
                    <li>💧 Drink water</li>
                    <li>🚶 Move around</li>
                    <li>🧠 Think about IR devices in your environment</li>
                </ul>
                <div class="break-timer" id="break-timer-2">5:00</div>
                <div class="break-controls">
                    <button class="btn-break" onclick="startBreakTimer2()">Start 5-Min Break</button>
                    <button class="btn-break secondary" onclick="skipBreak2()">Skip Break</button>
                </div>
            </div>

            <!-- Advanced IR Techniques -->
            <section class="content-section">
                <h2>Advanced IR Techniques</h2>
                <p>
                    Beyond basic learning and replay, there are more advanced uses for IR on the Flipper.
                </p>

                <h3>Editing IR Signals</h3>
                <p>
                    You can manually edit saved IR signals for customization:
                </p>
                <ul>
                    <li>Modify timing to work with slightly different devices</li>
                    <li>Combine commands for macros (if protocol supports it)</li>
                    <li>Adjust protocols for better compatibility</li>
                    <li>Fix corrupted captures</li>
                </ul>

                <h3>Creating IR Macros</h3>
                <p>
                    Some devices support command sequences:
                </p>
                <ul>
                    <li>Send multiple commands in quick succession</li>
                    <li>Useful for "activities" like "Watch Movie" (TV on, input switch, sound system on)</li>
                    <li>Requires proper timing between commands</li>
                    <li>Not all devices respond well to rapid commands</li>
                </ul>

                <h3>Brute Force Testing</h3>
                <p>
                    For security research, you can systematically test IR codes:
                </p>
                <ul>
                    <li>Generate all possible commands for a protocol</li>
                    <li>Send them sequentially to discover hidden functions</li>
                    <li>Useful for finding undocumented features or service menus</li>
                    <li>Time-consuming but can reveal interesting capabilities</li>
                </ul>

                <div class="info-box">
                    <h3>💡 Finding Hidden Service Menus</h3>
                    <p>
                        Many TVs and displays have hidden service menus accessed via IR:
                    </p>
                    <ul>
                        <li>Often used by technicians for calibration</li>
                        <li>Can expose advanced settings and diagnostics</li>
                        <li>Specific button combinations vary by manufacturer</li>
                        <li>Database of known combinations available online</li>
                    </ul>
                    <p style="margin-top: 0.75rem; color: var(--warning);">
                        <strong>Warning:</strong> Changing service menu settings can damage devices. Only explore on devices you own and are willing to risk.
                    </p>
                </div>

                <h3>Building an IR Database</h3>
                <p>
                    For comprehensive security testing or automation projects:
                </p>
                <ul>
                    <li>Learn signals from every device you encounter</li>
                    <li>Organize by brand and model</li>
                    <li>Document protocol types and quirks</li>
                    <li>Share with the community (IRDB repositories)</li>
                    <li>Contribute to open-source databases</li>
                </ul>
            </section>

            <!-- Exercise 3 -->
            <div class="exercise-box">
                <h3>🔧 Hands-On Exercise 3: Build a Multi-Device Control System</h3>
                <p><strong>Time:</strong> 15 minutes | <strong>Difficulty:</strong> Intermediate</p>
                <p>
                    Create a comprehensive IR library for your environment.
                </p>
                <ol class="exercise-steps">
                    <li>Identify all IR-controlled devices in one room</li>
                    <li>Learn the most important commands from each device</li>
                    <li>Organize remotes with clear, consistent naming</li>
                    <li>Test controlling multiple devices from your Flipper</li>
                    <li>Document any devices that don't respond properly</li>
                    <li>Try using universal remote databases for devices without original remotes</li>
                    <li>Create a reference sheet mapping Flipper buttons to device functions</li>
                    <li>Test in real-world scenarios (movie night, lights off, etc.)</li>
                </ol>
                <div style="margin-top: 1.5rem;">
                    <button class="btn-complete" onclick="completeExercise(3)">Mark Exercise Complete</button>
                </div>
            </div>

            <!-- Practical Applications -->
            <section class="content-section">
                <h2>Practical Applications</h2>
                <p>
                    Here are some legitimate and creative uses for IR control with your Flipper:
                </p>

                <h3>Home Automation Integration</h3>
                <ul>
                    <li>Control non-smart IR devices from smart home systems</li>
                    <li>Create automated scenes (movie mode, bedtime, etc.)</li>
                    <li>Voice control for IR devices via integration</li>
                    <li>Schedule device control (AC on before you get home)</li>
                </ul>

                <h3>Accessibility Solutions</h3>
                <ul>
                    <li>Consolidate multiple remotes for users with dexterity issues</li>
                    <li>Create simplified control interfaces</li>
                    <li>Enable voice or button control for those who can't use standard remotes</li>
                    <li>Remote assistance for elderly family members</li>
                </ul>

                <h3>Commercial/Professional Uses</h3>
                <ul>
                    <li>AV tech quick-setup tools for events</li>
                    <li>Hotel room control for hospitality staff</li>
                    <li>Retail display management</li>
                    <li>Conference room equipment control</li>
                </ul>

                <h3>Learning and Research</h3>
                <ul>
                    <li>Study IR protocol implementations</li>
                    <li>Reverse engineer proprietary protocols</li>
                    <li>Test device security postures</li>
                    <li>Build custom IR-controlled projects</li>
                </ul>

                <div class="info-box success">
                    <h3>✅ Responsible Use Guidelines</h3>
                    <ul>
                        <li>Only control devices you own or have permission to control</li>
                        <li>Don't disrupt public displays or business operations</li>
                        <li>Respect privacy—don't spy on others' device usage</li>
                        <li>Use your knowledge to improve, not harm</li>
                        <li>Share knowledge and databases with the community</li>
                    </ul>
                </div>
            </section>

            <!-- File Management -->
            <section class="content-section">
                <h2>Managing IR Libraries</h2>
                <p>
                    As your collection of IR signals grows, organization becomes important.
                </p>

                <h3>Naming Conventions</h3>
                <ul>
                    <li><strong>Device-based:</strong> "LivingRoom_TV_Samsung", "Bedroom_AC_LG"</li>
                    <li><strong>Location-based:</strong> "Office_Projector", "Kitchen_TV"</li>
                    <li><strong>Function-based:</strong> "Universal_TV_Power", "AC_Cool_Mode"</li>
                    <li>Use underscores instead of spaces for compatibility</li>
                </ul>

                <h3>Backup and Sync</h3>
                <p>
                    Don't lose your hard work:
                </p>
                <ul>
                    <li>Connect Flipper via USB and copy .ir files from /infrared/ folder</li>
                    <li>Store backups on your computer</li>
                    <li>Consider cloud storage for access across devices</li>
                    <li>Export files before firmware updates</li>
                </ul>

                <h3>Community Databases</h3>
                <p>
                    Leverage and contribute to community resources:
                </p>
                <ul>
                    <li><strong>IRDB:</strong> Large open-source IR database</li>
                    <li><strong>Flipper Forum:</strong> User-shared remote collections</li>
                    <li><strong>GitHub:</strong> Many repositories of IR files</li>
                    <li>Always test downloaded files before relying on them</li>
                </ul>
            </section>

            <!-- Lesson Summary -->
            <section class="content-section">
                <h2>Lesson Summary</h2>
                <p>
                    Great job! You've mastered infrared control with the Flipper Zero. Let's review what you've accomplished:
                </p>

                <div class="info-box success">
                    <h3>✅ Key Takeaways</h3>
                    <ul>
                        <li>Infrared uses light waves just below visible spectrum for wireless control</li>
                        <li>Different manufacturers use different protocols (NEC, RC5, Samsung, Sony, etc.)</li>
                        <li>Flipper can learn signals from existing remotes or use built-in databases</li>
                        <li>IR has no security—signals can be captured and replayed freely</li>
                        <li>Effective range is typically 5-10 meters with line-of-sight</li>
                        <li>Universal remote functionality consolidates multiple devices</li>
                        <li>IR should not be used for security-critical applications</li>
                        <li>Many practical applications for automation and accessibility</li>
                    </ul>
                </div>

                <h3>Skills You've Developed</h3>
                <ul>
                    <li>✓ Understanding IR technology and common protocols</li>
                    <li>✓ Learning signals from remote controls</li>
                    <li>✓ Transmitting IR commands effectively</li>
                    <li>✓ Building comprehensive universal remote libraries</li>
                    <li>✓ Testing transmission range and optimal conditions</li>
                    <li>✓ Understanding IR security implications</li>
                    <li>✓ Organizing and managing IR signal collections</li>
                    <li>✓ Identifying practical use cases for IR control</li>
                </ul>

                <h3>What's Next?</h3>
                <p>
                    In <strong>Lesson 5: BadUSB Attacks</strong>, you'll learn how to:
                </p>
                <ul>
                    <li>Understand USB HID protocol and keystroke injection</li>
                    <li>Create and execute BadUSB scripts</li>
                    <li>Test endpoint security against automated attacks</li>
                    <li>Write scripts in DuckyScript language</li>
                    <li>Conduct Red Team simulations</li>
                    <li>Defend against USB-based attacks</li>
                </ul>
            </section>

            <!-- Completion -->
            <div class="info-box success">
                <h3>🎉 Lesson Complete!</h3>
                <p>
                    You've earned <strong>50 XP</strong> for completing this lesson. Your progress has been saved automatically.
                </p>
                <p style="margin-top: 1rem;">
                    Ready to learn about USB attacks? Continue to Lesson 5!
                </p>
            </div>
        </article>

        <!-- Navigation -->
        <nav class="lesson-navigation">
            <a href="lesson-3.html" class="nav-btn secondary">
                ← Previous: NFC & RFID
            </a>
            <a href="lesson-5.html" class="nav-btn primary">
                Next: BadUSB Attacks →
            </a>
        </nav>
    </div>

    <script>
        let currentProgress = 0;
        let exercisesCompleted = [false, false, false];

        function updateProgress() {
            currentProgress = Math.min(100, (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100);
            document.getElementById('progress-fill').style.width = currentProgress + '%';
            document.getElementById('progress-percent').textContent = Math.round(currentProgress);
            localStorage.setItem('flipper-lesson-4-progress', currentProgress);
        }

        window.addEventListener('scroll', updateProgress);

        function completeExercise(exerciseNum) {
            exercisesCompleted[exerciseNum - 1] = true;
            const btn = event.target;
            btn.classList.add('completed');
            btn.textContent = '✓ Exercise Completed!';
            btn.disabled = true;
            localStorage.setItem(`flipper-lesson-4-exercise-${exerciseNum}`, 'true');
            
            if (exercisesCompleted.every(e => e)) {
                localStorage.setItem('flipper-lesson-4-complete', 'true');
            }
        }

        let breakInterval, breakInterval2;
        let breakTimeRemaining = 300;
        let breakTimeRemaining2 = 300;

        function startBreakTimer() {
            breakTimeRemaining = 300;
            const timerDisplay = document.getElementById('break-timer');
            const startBtn = event.target;
            startBtn.disabled = true;
            startBtn.textContent = 'Break in Progress...';
            
            breakInterval = setInterval(() => {
                breakTimeRemaining--;
                const minutes = Math.floor(breakTimeRemaining / 60);
                const seconds = breakTimeRemaining % 60;
                timerDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                if (breakTimeRemaining <= 0) {
                    clearInterval(breakInterval);
                    timerDisplay.textContent = 'Break Complete! ✓';
                    startBtn.disabled = false;
                    startBtn.textContent = 'Start Another Break';
                    if ('vibrate' in navigator) navigator.vibrate([200, 100, 200]);
                }
            }, 1000);
        }

        function skipBreak() {
            if (breakInterval) clearInterval(breakInterval);
            document.getElementById('break-timer').textContent = '5:00';
        }

        function startBreakTimer2() {
            breakTimeRemaining2 = 300;
            const timerDisplay = document.getElementById('break-timer-2');
            const startBtn = event.target;
            startBtn.disabled = true;
            startBtn.textContent = 'Break in Progress...';
            
            breakInterval2 = setInterval(() => {
                breakTimeRemaining2--;
                const minutes = Math.floor(breakTimeRemaining2 / 60);
                const seconds = breakTimeRemaining2 % 60;
                timerDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                if (breakTimeRemaining2 <= 0) {
                    clearInterval(breakInterval2);
                    timerDisplay.textContent = 'Break Complete! ✓';
                    startBtn.disabled = false;
                    startBtn.textContent = 'Start Another Break';
                    if ('vibrate' in navigator) navigator.vibrate([200, 100, 200]);
                }
            }, 1000);
        }

        function skipBreak2() {
            if (breakInterval2) clearInterval(breakInterval2);
            document.getElementById('break-timer-2').textContent = '5:00';
        }

        let fontSize = 16;
        const minFontSize = 12;
        const maxFontSize = 24;

        function adjustFontSize(change) {
            fontSize += change * 2;
            fontSize = Math.max(minFontSize, Math.min(maxFontSize, fontSize));
            document.documentElement.style.fontSize = fontSize + 'px';
            localStorage.setItem('fontSize', fontSize);
        }

        function toggleDyslexiaMode() {
            document.body.classList.toggle('dyslexia-friendly');
            localStorage.setItem('dyslexiaMode', document.body.classList.contains('dyslexia-friendly'));
        }

        function toggleHighContrast() {
            document.body.classList.toggle('high-contrast');
            localStorage.setItem('highContrast', document.body.classList.contains('high-contrast'));
        }

        function toggleReducedMotion() {
            document.body.classList.toggle('reduce-motion');
            localStorage.setItem('reducedMotion', document.body.classList.contains('reduce-motion'));
        }

        window.addEventListener('DOMContentLoaded', () => {
            const savedFontSize = localStorage.getItem('fontSize');
            if (savedFontSize) {
                fontSize = parseInt(savedFontSize);
                document.documentElement.style.fontSize = fontSize + 'px';
            }

            if (localStorage.getItem('dyslexiaMode') === 'true') {
                document.body.classList.add('dyslexia-friendly');
            }
            if (localStorage.getItem('highContrast') === 'true') {
                document.body.classList.add('high-contrast');
            }
            if (localStorage.getItem('reducedMotion') === 'true') {
                document.body.classList.add('reduce-motion');
            }

            for (let i = 1; i <= 3; i++) {
                if (localStorage.getItem(`flipper-lesson-4-exercise-${i}`) === 'true') {
                    exercisesCompleted[i - 1] = true;
                    const exercises = document.querySelectorAll('.exercise-box');
                    if (exercises[i - 1]) {
                        const btn = exercises[i - 1].querySelector('.btn-complete');
                        if (btn) {
                            btn.classList.add('completed');
                            btn.textContent = '✓ Exercise Completed!';
                            btn.disabled = true;
                        }
                    }
                }
            }

            const savedProgress = localStorage.getItem('flipper-lesson-4-progress');
            if (savedProgress) {
                currentProgress = parseFloat(savedProgress);
                document.getElementById('progress-fill').style.width = currentProgress + '%';
                document.getElementById('progress-percent').textContent = Math.round(currentProgress);
            }
        });

        window.addEventListener('beforeunload', () => {
            if (breakInterval) clearInterval(breakInterval);
            if (breakInterval2) clearInterval(breakInterval2);
        });
    </script>
</body>
</html>
