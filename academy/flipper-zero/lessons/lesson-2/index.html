<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lesson 2: Sub-GHz Radio Fundamentals | tw¬°st3d_¬°nk Academy</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg-dark: #0a0a0a;
      --bg-card: #1a1a1a;
      --accent: #00ff88;
      --text-primary: #ffffff;
      --text-secondary: #b0b0b0;
      --border: #333;
      --warning: #ff9500;
    }

    body {
      font-family: 'Atkinson Hyperlegible', sans-serif;
      background: var(--bg-dark);
      color: var(--text-primary);
      line-height: 1.8;
      padding: 20px;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
    }

    /* Accessibility Controls */
    .a11y-controls {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--bg-card);
      border: 2px solid var(--border);
      border-radius: 12px;
      padding: 15px;
      z-index: 1000;
      display: flex;
      gap: 10px;
    }

    .a11y-btn {
      background: var(--bg-dark);
      border: 1px solid var(--border);
      color: var(--text-primary);
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    .a11y-btn:hover {
      border-color: var(--accent);
      color: var(--accent);
    }

    .a11y-btn:focus {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }

    /* Navigation */
    <!-- Top Navigation -->
<nav class="lesson-nav">
  <a href="../../" class="nav-link">‚Üê Back to Course</a>
  <span class="lesson-badge">LESSON 2</span>
  <a href="../lesson-3/" class="nav-link">Next Lesson ‚Üí</a>
</nav>

<!-- Bottom Navigation -->
<div class="nav-buttons">
  <a href="../lesson-1/" class="nav-btn">‚Üê Previous Lesson</a>
  <a href="../../" class="nav-btn">Course Overview</a>
  <a href="../lesson-3/" class="nav-btn">Next Lesson ‚Üí</a>
</div>

<!-- JavaScript redirect -->
setTimeout(() => {
  window.location.href = '../lesson-3/';
}, 1500);

    .nav-link {
      color: var(--text-secondary);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: color 0.3s ease;
    }

    .nav-link:hover {
      color: var(--accent);
    }

    .lesson-badge {
      background: var(--bg-card);
      border: 2px solid var(--accent);
      padding: 8px 16px;
      border-radius: 8px;
      font-weight: 700;
      color: var(--accent);
    }

    /* Header */
    .lesson-header {
      margin-bottom: 40px;
    }

    .lesson-title {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 15px;
      background: linear-gradient(135deg, var(--accent), #00ccff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .lesson-meta {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      color: var(--text-secondary);
      font-size: 0.95rem;
    }

    .meta-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    /* Content Sections */
    .content-section {
      background: var(--bg-card);
      border: 2px solid var(--border);
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
    }

    .section-title {
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 20px;
      color: var(--accent);
    }

    .section-subtitle {
      font-size: 1.3rem;
      font-weight: 700;
      margin-top: 25px;
      margin-bottom: 15px;
      color: var(--text-primary);
    }

    p {
      margin-bottom: 15px;
      color: var(--text-secondary);
    }

    /* Alert Boxes */
    .alert {
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 20px;
      border: 2px solid;
    }

    .alert-warning {
      background: rgba(255, 149, 0, 0.1);
      border-color: var(--warning);
      color: var(--warning);
    }

    .alert-info {
      background: rgba(0, 255, 136, 0.1);
      border-color: var(--accent);
      color: var(--accent);
    }

    .alert-title {
      font-weight: 700;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    /* Lists */
    ul, ol {
      margin-left: 25px;
      margin-bottom: 20px;
      color: var(--text-secondary);
    }

    li {
      margin-bottom: 10px;
      line-height: 1.7;
    }

    /* Code Blocks */
    .code-block {
      background: var(--bg-dark);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      overflow-x: auto;
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
    }

    .code-block code {
      color: var(--accent);
    }

    /* Interactive Elements */
    .interactive-demo {
      background: var(--bg-dark);
      border: 2px solid var(--accent);
      border-radius: 12px;
      padding: 25px;
      margin-bottom: 20px;
    }

    .demo-title {
      font-weight: 700;
      margin-bottom: 15px;
      color: var(--accent);
    }

    .frequency-display {
      font-size: 2rem;
      font-weight: 700;
      text-align: center;
      color: var(--accent);
      margin: 20px 0;
      font-family: 'Courier New', monospace;
    }

    .frequency-slider {
      width: 100%;
      height: 8px;
      border-radius: 4px;
      background: var(--border);
      outline: none;
      margin-bottom: 15px;
      -webkit-appearance: none;
    }

    .frequency-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: var(--accent);
      cursor: pointer;
    }

    .frequency-slider::-moz-range-thumb {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: var(--accent);
      cursor: pointer;
      border: none;
    }

    /* Progress Footer */
    .lesson-footer {
      background: var(--bg-card);
      border: 2px solid var(--border);
      border-radius: 16px;
      padding: 30px;
      margin-top: 40px;
    }

    .completion-section {
      text-align: center;
    }

    .xp-reward {
      font-size: 3rem;
      font-weight: 700;
      color: var(--accent);
      margin-bottom: 10px;
    }

    .complete-btn {
      background: var(--accent);
      color: var(--bg-dark);
      border: none;
      padding: 15px 40px;
      border-radius: 12px;
      font-weight: 700;
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 20px;
    }

    .complete-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 24px rgba(0, 255, 136, 0.4);
    }

    .complete-btn:disabled {
      background: var(--border);
      color: var(--text-secondary);
      cursor: not-allowed;
      transform: none;
    }

    .nav-buttons {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .nav-btn {
      background: var(--bg-dark);
      color: var(--accent);
      border: 2px solid var(--accent);
      padding: 12px 30px;
      border-radius: 8px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-block;
    }

    .nav-btn:hover {
      background: var(--accent);
      color: var(--bg-dark);
    }

    /* Font Size Classes */
    body.font-small { font-size: 14px; }
    body.font-large { font-size: 18px; }
    body.font-xl { font-size: 22px; }

    /* High Contrast Mode */
    body.high-contrast {
      --bg-dark: #000000;
      --bg-card: #1a1a1a;
      --text-primary: #ffffff;
      --border: #00ff88;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .lesson-title {
        font-size: 2rem;
      }

      .a11y-controls {
        position: static;
        margin-bottom: 20px;
        flex-wrap: wrap;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Accessibility Controls -->
    <div class="a11y-controls">
      <button class="a11y-btn" onclick="changeFontSize('small')" aria-label="Decrease font size">A-</button>
      <button class="a11y-btn" onclick="changeFontSize('normal')" aria-label="Normal font size">A</button>
      <button class="a11y-btn" onclick="changeFontSize('large')" aria-label="Increase font size">A+</button>
      <button class="a11y-btn" onclick="changeFontSize('xl')" aria-label="Extra large font size">A++</button>
      <button class="a11y-btn" onclick="toggleContrast()" aria-label="Toggle high contrast">‚óê</button>
    </div>

    <!-- Navigation -->
    <nav class="lesson-nav">
      <a href="index.html" class="nav-link">‚Üê Back to Course</a>
      <span class="lesson-badge">LESSON 2</span>
      <a href="lesson-3.html" class="nav-link">Next Lesson ‚Üí</a>
    </nav>

    <!-- Lesson Header -->
    <header class="lesson-header">
      <h1 class="lesson-title">Sub-GHz Radio Fundamentals</h1>
      <div class="lesson-meta">
        <span class="meta-item">‚è±Ô∏è 45 minutes</span>
        <span class="meta-item">‚ö° 50 XP</span>
        <span class="meta-item">üì∂ Difficulty: Medium</span>
      </div>
    </header>

    <!-- Introduction -->
    <section class="content-section">
      <h2 class="section-title">üì° Introduction to Sub-GHz Communication</h2>
      
      <p>Sub-gigahertz radio frequencies are the invisible highways of wireless communication. From garage door openers to car key fobs, weather stations to wireless doorbells, these frequencies power countless devices we interact with daily.</p>

      <p>The Flipper Zero's Sub-GHz module can receive, analyze, and transmit signals in several frequency bands commonly used for short-range wireless communication. This lesson will teach you how to safely explore this fascinating domain.</p>

      <div class="alert alert-warning">
        <div class="alert-title">‚ö†Ô∏è Legal Notice</div>
        <p>Transmitting on certain frequencies may be regulated or illegal in your jurisdiction. This lesson is for educational purposes only. Always ensure you have permission to interact with any wireless system and comply with local regulations regarding radio frequency transmission.</p>
      </div>
    </section>

    <!-- Understanding Sub-GHz -->
    <section class="content-section">
      <h2 class="section-title">üîç Understanding Sub-GHz Frequencies</h2>

      <h3 class="section-subtitle">What are Sub-GHz Frequencies?</h3>
      <p>Sub-GHz refers to radio frequencies below 1 gigahertz (1000 MHz). The Flipper Zero primarily works with these common bands:</p>

      <ul>
        <li><strong>315 MHz</strong> - Popular in North America for garage doors, car remotes, and security systems</li>
        <li><strong>433.92 MHz</strong> - Widely used in Europe and Asia for remote controls and sensors</li>
        <li><strong>868 MHz</strong> - European standard for home automation and IoT devices</li>
        <li><strong>915 MHz</strong> - North American ISM band for various wireless applications</li>
      </ul>

      <h3 class="section-subtitle">Why Sub-GHz?</h3>
      <p>These lower frequencies offer several advantages over higher frequency bands like WiFi (2.4 GHz) or Bluetooth:</p>

      <ul>
        <li><strong>Better penetration</strong> - Lower frequencies pass through walls and obstacles more easily</li>
        <li><strong>Longer range</strong> - Signals can travel further with the same transmission power</li>
        <li><strong>Lower power consumption</strong> - Ideal for battery-powered devices</li>
        <li><strong>Simpler protocols</strong> - Many devices use basic on-off keying (OOK) modulation</li>
      </ul>

      <div class="interactive-demo">
        <div class="demo-title">üéØ Interactive: Frequency Explorer</div>
        <p>Slide to explore different Sub-GHz frequencies used by the Flipper Zero:</p>
        <div class="frequency-display" id="frequencyDisplay">315.00 MHz</div>
        <input type="range" min="300" max="928" value="315" class="frequency-slider" id="frequencySlider">
        <p id="frequencyInfo" style="text-align: center; color: var(--text-secondary);"></p>
      </div>
    </section>

    <!-- Capturing Signals -->
    <section class="content-section">
      <h2 class="section-title">üì• Capturing RF Signals</h2>

      <h3 class="section-subtitle">The Capture Process</h3>
      <p>Capturing a signal is the first step in understanding how wireless devices communicate. Here's how to do it with the Flipper Zero:</p>

      <ol>
        <li><strong>Navigate to Sub-GHz menu</strong> - From the main menu, select "Sub-GHz"</li>
        <li><strong>Choose "Read"</strong> - This puts the device into listening mode</li>
        <li><strong>Select frequency</strong> - Pick the appropriate frequency for your target device</li>
        <li><strong>Trigger the device</strong> - Press the button on your remote/key fob</li>
        <li><strong>Analyze the capture</strong> - The Flipper will show signal characteristics</li>
        <li><strong>Save the signal</strong> - Give it a descriptive name for later use</li>
      </ol>

      <div class="alert alert-info">
        <div class="alert-title">üí° Pro Tip</div>
        <p>Start with a device you own, like a spare garage door remote or a wireless doorbell. This ensures you're legally authorized to experiment with the signal and can safely test transmissions.</p>
      </div>

      <h3 class="section-subtitle">Understanding Signal Characteristics</h3>
      <p>When you capture a signal, the Flipper Zero displays several important parameters:</p>

      <ul>
        <li><strong>Frequency</strong> - The exact frequency in MHz (e.g., 433.92 MHz)</li>
        <li><strong>Modulation</strong> - Usually AM (Amplitude Modulation) for simple devices</li>
        <li><strong>RAW data</strong> - The actual timing of signal pulses</li>
        <li><strong>Protocol</strong> - If recognized, shows the encoding scheme (Princeton, etc.)</li>
      </ul>

      <div class="code-block">
        <code>
Example Signal Data:<br>
Frequency: 433.92 MHz<br>
Preset: FuriHalSubGhzPresetOok650Async<br>
Protocol: Princeton<br>
Key: 00 00 00 00 00 12 34 56<br>
TE: 350 us
        </code>
      </div>
    </section>

    <!-- Analyzing & Replaying -->
    <section class="content-section">
      <h2 class="section-title">üîÑ Analyzing and Replaying Signals</h2>

      <h3 class="section-subtitle">Signal Analysis</h3>
      <p>After capturing a signal, take time to understand what you've recorded:</p>

      <ul>
        <li><strong>Static vs Rolling Codes</strong> - Static codes are the same every time; rolling codes change with each press</li>
        <li><strong>Bit length</strong> - Typically 24-64 bits for simple remotes</li>
        <li><strong>Timing accuracy</strong> - Critical for successful replay</li>
        <li><strong>Signal strength</strong> - Indicated by RSSI (Received Signal Strength Indicator)</li>
      </ul>

      <h3 class="section-subtitle">Replaying Captured Signals</h3>
      <p>Once you've captured and analyzed a signal, you can replay it:</p>

      <ol>
        <li>Navigate to "Sub-GHz" ‚Üí "Saved"</li>
        <li>Select your saved signal file</li>
        <li>Choose "Send" to transmit the signal</li>
        <li>The Flipper will replay the exact timing captured</li>
      </ol>

      <div class="alert alert-warning">
        <div class="alert-title">‚ö†Ô∏è Important: Rolling Codes</div>
        <p>Many modern car key fobs and garage door openers use rolling code technology. These codes change with each transmission and cannot be simply replayed. Attempting to replay a rolling code will not work and may desynchronize the remote with its receiver.</p>
      </div>

      <h3 class="section-subtitle">When Replay Works</h3>
      <p>Successful replay attacks work on devices using static codes, such as:</p>
      <ul>
        <li>Older garage door openers (pre-1990s)</li>
        <li>Simple wireless doorbells</li>
        <li>Some remote control outlets</li>
        <li>Basic weather station sensors</li>
        <li>Certain RF-based toys</li>
      </ul>
    </section>

    <!-- Practical Exercise -->
    <section class="content-section">
      <h2 class="section-title">üéØ Practical Exercise</h2>

      <h3 class="section-subtitle">Your First Capture & Replay</h3>
      <p>Let's practice with a safe, legal target - a wireless doorbell or remote control you own:</p>

      <ol>
        <li><strong>Preparation</strong>
          <ul>
            <li>Charge your Flipper Zero fully</li>
            <li>Have your target remote ready</li>
            <li>Find an area away from other RF interference</li>
          </ul>
        </li>
        <li><strong>Capture Phase</strong>
          <ul>
            <li>Open Sub-GHz ‚Üí Read</li>
            <li>Try 433.92 MHz first (most common)</li>
            <li>Press your remote button</li>
            <li>Observe the signal capture</li>
            <li>Save with a descriptive name</li>
          </ul>
        </li>
        <li><strong>Analysis Phase</strong>
          <ul>
            <li>Review the captured data</li>
            <li>Note the frequency and modulation</li>
            <li>Check if a protocol was identified</li>
          </ul>
        </li>
        <li><strong>Replay Phase</strong>
          <ul>
            <li>Navigate to your saved signal</li>
            <li>Stand at the same distance from the receiver</li>
            <li>Send the signal</li>
            <li>Verify the device responds</li>
          </ul>
        </li>
      </ol>

      <div class="alert alert-info">
        <div class="alert-title">‚úÖ Success Criteria</div>
        <p>You've mastered this lesson when you can successfully capture a signal from your own remote and replay it to trigger the same action. Document your findings: What frequency? What protocol? Did replay work on the first try?</p>
      </div>
    </section>

    <!-- Best Practices -->
    <section class="content-section">
      <h2 class="section-title">‚ú® Best Practices & Safety</h2>

      <h3 class="section-subtitle">Ethical Guidelines</h3>
      <ul>
        <li><strong>Only test devices you own</strong> - Never attempt to capture or replay signals from systems you don't have permission to test</li>
        <li><strong>Respect privacy</strong> - Some signals may contain personal information</li>
        <li><strong>Know your local laws</strong> - RF transmission is regulated differently worldwide</li>
        <li><strong>Practice responsible disclosure</strong> - If you find a vulnerability, report it properly</li>
      </ul>

      <h3 class="section-subtitle">Technical Tips</h3>
      <ul>
        <li>Start captures from a close distance (1-2 meters) for cleaner signals</li>
        <li>Save multiple captures of the same signal to compare consistency</li>
        <li>Use the frequency analyzer to find the exact frequency before capturing</li>
        <li>Keep your Flipper Zero's firmware updated for best protocol support</li>
        <li>Document your experiments with notes on frequency, distance, and results</li>
      </ul>
    </section>

    <!-- Lesson Footer -->
    <footer class="lesson-footer">
      <div class="completion-section">
        <div class="xp-reward">+50 XP</div>
        <p>Complete this lesson to earn your XP and unlock the next module!</p>
        <button class="complete-btn" id="completeBtn" onclick="markComplete()">
          Mark Lesson Complete
        </button>
        <div class="nav-buttons">
          <a href="lesson-1.html" class="nav-btn">‚Üê Previous Lesson</a>
          <a href="index.html" class="nav-btn">Course Overview</a>
          <a href="lesson-3.html" class="nav-btn">Next Lesson ‚Üí</a>
        </div>
      </div>
    </footer>
  </div>

  <script>
    // Storage configuration - syncs with course overview
    const COURSE_STORAGE_KEY = 'flipper-zero-course';
    const LESSON_ID = 2;

    // Frequency explorer interactive
    const slider = document.getElementById('frequencySlider');
    const display = document.getElementById('frequencyDisplay');
    const info = document.getElementById('frequencyInfo');

    const frequencyInfo = {
      315: { band: '315 MHz', use: 'Popular in North America for garage doors and car remotes' },
      433: { band: '433.92 MHz', use: 'Widely used in Europe/Asia for remote controls and sensors' },
      868: { band: '868 MHz', use: 'European standard for home automation and IoT devices' },
      915: { band: '915 MHz', use: 'North American ISM band for wireless applications' }
    };

    slider.addEventListener('input', (e) => {
      const freq = parseFloat(e.target.value);
      display.textContent = freq.toFixed(2) + ' MHz';
      
      // Find closest standard frequency
      let closest = 315;
      let minDiff = Math.abs(freq - 315);
      
      [433, 868, 915].forEach(f => {
        const diff = Math.abs(freq - f);
        if (diff < minDiff) {
          minDiff = diff;
          closest = f;
        }
      });
      
      if (minDiff < 20) {
        info.textContent = frequencyInfo[closest].use;
      } else {
        info.textContent = 'Custom frequency range';
      }
    });

    // Progress tracking functions
    async function loadProgress() {
      try {
        const result = await window.storage.get(COURSE_STORAGE_KEY);
        return result ? JSON.parse(result.value) : { completed: [] };
      } catch (error) {
        return { completed: [] };
      }
    }

    async function saveProgress(progress) {
      try {
        await window.storage.set(COURSE_STORAGE_KEY, JSON.stringify(progress));
        return true;
      } catch (error) {
        console.error('Failed to save progress:', error);
        return false;
      }
    }

    async function markComplete() {
      const btn = document.getElementById('completeBtn');
      btn.disabled = true;
      btn.textContent = 'Saving...';

      const progress = await loadProgress();
      
      if (!progress.completed.includes(LESSON_ID)) {
        progress.completed.push(LESSON_ID);
        const saved = await saveProgress(progress);
        
        if (saved) {
          btn.textContent = '‚úì Lesson Complete!';
          btn.style.background = 'var(--accent)';
          setTimeout(() => {
            window.location.href = 'lesson-3.html';
          }, 1500);
        } else {
          btn.textContent = 'Error - Try Again';
          btn.disabled = false;
        }
      } else {
        btn.textContent = '‚úì Already Complete';
      }
    }

    // Check if already completed
    async function checkCompletion() {
      const progress = await loadProgress();
      if (progress.completed.includes(LESSON_ID)) {
        const btn = document.getElementById('completeBtn');
        btn.textContent = '‚úì Completed';
        btn.style.background = 'var(--border)';
      }
    }

    // Accessibility functions
    function changeFontSize(size) {
      document.body.className = document.body.className.replace(/font-\w+/g, '');
      if (size !== 'normal') {
        document.body.classList.add('font-' + size);
      }
      localStorage.setItem('fontSize', size);
    }

    function toggleContrast() {
      document.body.classList.toggle('high-contrast');
      localStorage.setItem('highContrast', document.body.classList.contains('high-contrast'));
    }

    function loadA11yPreferences() {
      const fontSize = localStorage.getItem('fontSize');
      if (fontSize && fontSize !== 'normal') {
        document.body.classList.add('font-' + fontSize);
      }

      const highContrast = localStorage.getItem('highContrast') === 'true';
      if (highContrast) {
        document.body.classList.add('high-contrast');
      }
    }

    // Initialize
    loadA11yPreferences();
    checkCompletion();
  </script>
</body>
</html>
