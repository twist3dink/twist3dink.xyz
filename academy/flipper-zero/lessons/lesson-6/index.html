<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lesson 6: BadUSB & GPIO | Flipper Zero Course - tw¡st3d_¡nk Academy</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:wght@400;700&display=swap" rel="stylesheet" />

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Atkinson Hyperlegible', sans-serif;
      background: #0a0a0a;
      color: #e0e0e0;
      line-height: 1.6;
      padding: 2rem 1rem;
    }

    .container { max-width: 900px; margin: 0 auto; }

    .lesson-header {
      background: #1a1a1a;
      padding: 2rem;
      border-radius: 8px;
      border: 1px solid #333;
      margin-bottom: 2rem;
    }

    .lesson-header h1 {
      color: #00ff88;
      font-size: 2rem;
      margin-bottom: 1rem;
    }

    .lesson-meta {
      color: #999;
      font-size: 1rem;
      margin-bottom: 1rem;
    }

    .lesson-header button {
      background: transparent;
      border: 2px solid #00ff88;
      color: #00ff88;
      padding: 0.6rem 1.2rem;
      border-radius: 4px;
      cursor: pointer;
      font-family: 'Atkinson Hyperlegible', sans-serif;
      font-size: 1rem;
      transition: all 0.3s;
    }

    .lesson-header button:hover {
      background: #00ff88;
      color: #0a0a0a;
    }

    .content-section {
      background: #1a1a1a;
      padding: 2rem;
      border-radius: 8px;
      border: 1px solid #333;
      margin-bottom: 2rem;
    }

    .content-section h2 {
      color: #00ff88;
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }

    .content-section h3 {
      color: #00ff88;
      font-size: 1.2rem;
      margin: 1.5rem 0 0.8rem 0;
    }

    .content-section p {
      font-size: 1.1rem;
      margin-bottom: 1rem;
      letter-spacing: 0.3px;
    }

    .content-section ul, .content-section ol { margin: 1rem 0 1rem 2rem; }
    .content-section li { font-size: 1.1rem; margin-bottom: 0.5rem; letter-spacing: 0.3px; }

    .note-box {
      background: #141414;
      border-left: 4px solid #00ff88;
      padding: 1rem;
      margin: 1.5rem 0;
      border-radius: 4px;
    }

    .warning-box {
      background: #2a1a1a;
      border-left: 4px solid #ff4444;
      padding: 1rem;
      margin: 1.5rem 0;
      border-radius: 4px;
    }

    .warning-box strong { color: #ff4444; }

    .code-block {
      background: #0a0a0a;
      border: 1px solid #333;
      border-radius: 6px;
      padding: 1rem;
      margin: 1rem 0;
      overflow-x: auto;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.95rem;
      color: #00ff88;
      white-space: pre;
    }

    #complete-btn {
      background: #00ff88;
      color: #0a0a0a;
      border: none;
      padding: 1rem 2rem;
      border-radius: 4px;
      cursor: pointer;
      font-family: 'Atkinson Hyperlegible', sans-serif;
      font-size: 1.1rem;
      font-weight: 700;
      width: 100%;
      margin: 2rem 0;
      transition: all 0.3s;
    }

    #complete-btn:hover { background: #00dd77; }

    #complete-btn.completed {
      background: #333;
      color: #00ff88;
      border: 2px solid #00ff88;
      cursor: default;
    }

    #complete-btn.locked {
      background: #333;
      color: #666;
      border: 2px solid #666;
      cursor: not-allowed;
    }

    #complete-btn.error {
      background: #ff4444;
      color: #fff;
    }

    .nav-section {
      background: #1a1a1a;
      padding: 2rem;
      border-radius: 8px;
      border: 1px solid #333;
      margin-top: 2rem;
    }

    .nav-section button {
      background: transparent;
      border: 2px solid #00ff88;
      color: #00ff88;
      padding: 0.6rem 1.2rem;
      border-radius: 4px;
      cursor: pointer;
      font-family: 'Atkinson Hyperlegible', sans-serif;
      font-size: 1rem;
      margin-bottom: 1.5rem;
      width: 100%;
      transition: all 0.3s;
    }

    .nav-section button:hover {
      background: #00ff88;
      color: #0a0a0a;
    }

    .nav-buttons { display: flex; gap: 1rem; flex-wrap: wrap; }

    .nav-buttons a {
      flex: 1;
      min-width: 150px;
      text-align: center;
      padding: 1rem;
      border-radius: 4px;
      text-decoration: none;
      font-weight: 700;
      transition: all 0.3s;
    }

    .nav-buttons a:nth-child(1),
    .nav-buttons a:nth-child(2) {
      background: transparent;
      border: 2px solid #00ff88;
      color: #00ff88;
    }

    .nav-buttons a:nth-child(1):hover,
    .nav-buttons a:nth-child(2):hover {
      background: #00ff88;
      color: #0a0a0a;
    }

    .nav-buttons a:nth-child(3) {
      background: #00ff88;
      color: #0a0a0a;
      border: 2px solid #00ff88;
    }

    .nav-buttons a:nth-child(3):hover { background: #00dd77; }

    @media (max-width: 768px) {
      body { padding: 1rem 0.5rem; }
      .lesson-header h1 { font-size: 1.5rem; }
      .content-section { padding: 1.5rem; }
      .nav-buttons { flex-direction: column; }
      .nav-buttons a { min-width: 100%; }
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="lesson-header">
      <h1>Lesson 6: BadUSB & GPIO</h1>
      <p class="lesson-meta">Estimated time: 30 minutes | XP Reward: 50</p>
      <button onclick="scrollToBottom()">Skip to Bottom ↓</button>
    </div>

    <!-- NEW SECTION: Stop the Noise -->
    <div class="content-section">
      <h2>Stop the Noise: Where Does This Go?</h2>
      <p>
        Real talk: most “beginner” guides say “paste this here” like you’ve memorized the anatomy of an HTML page.
        If you’re new, that’s not “easy” — it’s guessing. This section removes the guesswork.
      </p>

      <h3>Two rules that prevent 90% of beginner pain</h3>
      <ul>
        <li><strong>CSS</strong> goes inside <code>&lt;style&gt;...&lt;/style&gt;</code> (design only).</li>
        <li><strong>HTML content</strong> goes inside <code>&lt;body&gt;...&lt;/body&gt;</code> (sections, text, buttons).</li>
      </ul>

      <div class="note-box">
        <strong>Translation:</strong>
        If it starts with <code>&lt;div&gt;</code> it’s HTML. If it looks like <code>.class { ... }</code> it’s CSS.
        Mixing them is the #1 “why did my page explode” bug.
      </div>

      <h3>Exactly where your “Objective / Deliverables” blocks belong</h3>
      <ol>
        <li>Find <code>&lt;div class="lesson-header"&gt; ... &lt;/div&gt;</code> (the title box above).</li>
        <li>Paste new content sections <em>directly under it</em> (which is exactly where this block is now).</li>
        <li>Never paste <code>&lt;div&gt;</code> inside <code>&lt;style&gt;</code>. Ever.</li>
      </ol>
    </div>

    <!-- NEW SECTION: Objective -->
    <div class="content-section">
      <h2>Objective</h2>
      <p>
        Complete two safe proof loops: (1) BadUSB “type-only” automation on your own computer, and
        (2) GPIO safety + pinout verification on the Flipper.
        The goal is controlled learning and documentation — not “doing damage fast.”
      </p>

      <div class="warning-box">
        <strong>Boundary (non-negotiable):</strong>
        <ul style="margin-top: 0.5rem;">
          <li>Only run BadUSB on computers you own (or have explicit written permission to test).</li>
          <li>No command shells, no downloads, no persistence, no “hidden” behavior.</li>
          <li>If you can’t explain what your script does in one sentence, don’t run it.</li>
        </ul>
      </div>
    </div>

    <!-- NEW SECTION: BadUSB Safe Demo -->
    <div class="content-section">
      <h2>BadUSB (Safe Demo)</h2>
      <p>
        BadUSB works because computers trust USB keyboards automatically. In this exercise, you prove that trust model
        safely by typing text into a window you opened yourself.
      </p>

      <h3>BadUSB Exercise: Type-Only Script</h3>
      <ol>
        <li>On your computer, open a text editor (Notepad, TextEdit, Notes, etc.).</li>
        <li>Click inside the editor so the text area is focused.</li>
        <li>On Flipper: open <strong>BadUSB</strong> and run your script file.</li>
      </ol>

      <div class="note-box">
        <strong>Important:</strong> This script should only type text + press Enter. No shortcuts, no app launching, no system commands.
      </div>

      <h3><code>demo-type-only.txt</code> (exact script)</h3>
      <div class="code-block">REM Title: demo-type-only
REM Purpose: Safe proof of BadUSB typing
REM Target: YOUR OWN computer only

DELAY 1000
STRING BadUSB test successful.
ENTER
STRING Lesson 6 proof loop complete.
ENTER
STRING I understand USB keyboards are trusted by default.
ENTER</div>

      <h3>Deliverables (BadUSB Proof Pack)</h3>
      <ul>
        <li><strong>D6.1</strong> — One BadUSB script saved to <strong>/badusb/</strong> named: <strong>demo-type-only.txt</strong></li>
        <li><strong>D6.2</strong> — Photo/screenshot showing the typed output in your editor</li>
        <li><strong>D6.3</strong> — “Run Report” (5–8 lines):
          <ul>
            <li><strong>Device:</strong> (your computer)</li>
            <li><strong>Ownership:</strong> Mine</li>
            <li><strong>Focused window:</strong> (what was active)</li>
            <li><strong>What it typed:</strong></li>
            <li><strong>Did it behave as expected?</strong></li>
            <li><strong>One lesson learned:</strong> (about USB trust)</li>
          </ul>
        </li>
      </ul>
    </div>

    <!-- NEW SECTION: GPIO Safe Verification -->
    <div class="content-section">
      <h2>GPIO (Safe Verification)</h2>
      <p>
        GPIO is where you can physically damage your device if you wing it. So the proof loop here is: identify power + ground,
        and lock in the safety rules before you ever wire anything.
      </p>

      <h3>GPIO Exercise: Pinout + Safety Checklist</h3>
      <ol>
        <li>On Flipper, open the <strong>GPIO</strong> app/menu.</li>
        <li>Find your GPIO reference: on-device reference screen <em>or</em> pin labels on the device <em>or</em> an official pinout you’ve saved/printed.</li>
        <li>Identify the <strong>3.3V</strong> pin and at least one <strong>GND</strong> pin.</li>
      </ol>

      <div class="warning-box">
        <strong>Hardware rule:</strong> Treat GPIO as <strong>3.3V logic only</strong>. Overvoltage can permanently damage pins.
      </div>

      <h3>Deliverables (GPIO Proof Pack)</h3>
      <ul>
        <li><strong>D6.4</strong> — Photo of your GPIO reference (screen OR pin labels OR official pinout)</li>
        <li><strong>D6.5</strong> — 5-line GPIO Safety Checklist:
          <ul>
            <li><strong>Logic level used:</strong> 3.3V</li>
            <li><strong>Never connect this voltage directly:</strong> 5V / 12V</li>
            <li><strong>Must share this reference with external circuits:</strong> GND</li>
            <li><strong>LED protection component:</strong> Current-limiting resistor (220Ω–330Ω)</li>
            <li><strong>My rule before wiring:</strong> “Power off, re-check, then connect.”</li>
          </ul>
        </li>
      </ul>

      <div class="note-box">
        <strong>Optional (not required):</strong> If you already own an LED + resistor + jumper wires, you can do a basic output test using a built-in manual GPIO toggle feature (if your firmware has it). Don’t freestyle wiring if you’re unsure.
      </div>
    </div>

    <div class="content-section">
      <h2>Finished Means</h2>
      <ul>
        <li>D6.1 + D6.2 + D6.3 exist (BadUSB proof loop complete).</li>
        <li>D6.4 + D6.5 exist (GPIO proof loop complete).</li>
        <li>You can explain what you did in one minute without drifting into “cooler stuff.”</li>
      </ul>
    </div>

    <button id="complete-btn" class="locked" onclick="markComplete()">Complete Previous Lesson First</button>

    <div class="nav-section">
      <button onclick="scrollToTop()">Back to Top ↑</button>
      <div class="nav-buttons">
        <a href="../lesson-5/">← Previous Lesson</a>
        <a href="../../">Course Overview</a>
        <a href="https://twist3dink.xyz/academy/">Back to Academy</a>
      </div>
    </div>
  </div>

  <script>
    function scrollToBottom() {
      window.scrollTo({ top: document.body.scrollHeight, behavior: 'instant' });
    }

    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'instant' });
    }

    function loadProgress() {
      try {
        const saved = localStorage.getItem('flipper-progress');
        return saved ? JSON.parse(saved) : { currentLesson: 1, completedLessons: [], totalXP: 0 };
      } catch (e) {
        console.error('Error loading progress:', e);
        return { currentLesson: 1, completedLessons: [], totalXP: 0 };
      }
    }

    function saveProgress(progress) {
      try {
        localStorage.setItem('flipper-progress', JSON.stringify(progress));
        return true;
      } catch (e) {
        console.error('Error saving progress:', e);
        return false;
      }
    }

    function markComplete() {
      const btn = document.getElementById('complete-btn');
      const currentLessonNumber = 6;
      const progress = loadProgress();

      // Gate: must complete Lesson 5 first
      if (!progress.completedLessons.includes(currentLessonNumber - 1)) return;

      if (!progress.completedLessons.includes(currentLessonNumber)) {
        progress.completedLessons.push(currentLessonNumber);
        progress.totalXP += 50;

        if (progress.currentLesson === currentLessonNumber) {
          progress.currentLesson = currentLessonNumber + 1;
        }

        const saved = saveProgress(progress);

        if (saved) {
          btn.textContent = '✓ Lesson Complete - Course Finished!';
          btn.classList.remove('locked');
          btn.classList.add('completed');
        } else {
          btn.textContent = 'Error - Try Again';
          btn.classList.add('error');
          setTimeout(() => {
            btn.textContent = 'Mark Lesson as Complete';
            btn.classList.remove('error');
          }, 2000);
        }
      }
    }

    window.addEventListener('load', () => {
      const progress = loadProgress();
      const currentLessonNumber = 6;
      const btn = document.getElementById('complete-btn');

      if (progress.completedLessons.includes(currentLessonNumber)) {
        btn.textContent = '✓ Lesson Complete - Course Finished!';
        btn.classList.add('completed');
      } else if (progress.completedLessons.includes(currentLessonNumber - 1)) {
        btn.textContent = 'Mark Lesson as Complete';
        btn.classList.remove('locked');
      } else {
        btn.textContent = 'Complete Previous Lesson First';
        btn.classList.add('locked');
      }
    });
  </script>
</body>
</html>
